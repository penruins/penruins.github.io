<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Posts on Penruins</title>
    <link>/post/</link>
    <description>Recent content in Posts on Penruins</description>
    <generator>Hugo</generator>
    <language>en</language>
    <copyright>[Main Page](/)</copyright>
    <lastBuildDate>Mon, 01 Jan 0001 00:00:00 +0000</lastBuildDate>
    <atom:link href="/post/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title></title>
      <link>/post/blog/2025/2025-03-31-shardingsphere-prometheus-%E9%85%8D%E7%BD%AE/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/post/blog/2025/2025-03-31-shardingsphere-prometheus-%E9%85%8D%E7%BD%AE/</guid>
      <description>&lt;h1 id=&#34;2025-03-31-shardingsphere-prometheus-配置&#34;&gt;2025-03-31-Shardingsphere-prometheus-配置&lt;a class=&#34;anchor&#34; href=&#34;#2025-03-31-shardingsphere-prometheus-%e9%85%8d%e7%bd%ae&#34;&gt;#&lt;/a&gt;&lt;/h1&gt;&#xA;&lt;p&gt;把 shardingsphere proxy 搭建好之后，想要把监测数据放到 grafana里面进行监测，但是按照找到的资料来配置好像都不太行，自己研究了一下启动脚本，现在可以正常获取到指标数据了，所以花点时间把这个问题记录一下&lt;/p&gt;&#xA;&lt;p&gt;下载了官网提供的 shardingsphere-proxy 的包之后，里面其实已经包含了 agent 相关的 jar 包以及插件相关的 jar 包，其实不需要再下载一个 shardingsphere-agent&lt;/p&gt;&#xA;&lt;p&gt;我们需要配置一下&lt;code&gt;agent.yaml&lt;/code&gt;里面的内容，文件的位置在 &lt;code&gt;apache-shardingsphere-5.5.2-shardingsphere-proxy-bin/agent/conf/agent.yaml&lt;/code&gt;，现在只需要配置 prometheus，所以如下所示&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;plugins:&#xA;  metrics:&#xA;    Prometheus:&#xA;      host: &amp;#34;localhost&amp;#34;&#xA;      port: 9000&#xA;      props:&#xA;        jvm-information-collector-enabled: &amp;#34;true&amp;#34;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;在 prometheus 的配置文件中需要加上 9000 的指标接口（如果是使用 brew 安装的话，配置文件在这个位置 &lt;code&gt;/opt/homebrew/etc/prometheus.yml&lt;/code&gt;）&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;scrape_configs:&#xA;  - job_name: &amp;#39;shardingsphere&amp;#39;&#xA;    static_configs:&#xA;      - targets: [&amp;#39;localhost:9000&amp;#39;]&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;网上查到的这篇文章 &lt;a href=&#34;https://xie.infoq.cn/article/37c5c2380ce7f3c495b6841c7&#34;&gt;Apache ShardingSphere Agent 可观察性实用指南&lt;/a&gt; 提到需要修改脚本文件，其实是不用修改的，只需要夹一个参数 &lt;code&gt;--agent&lt;/code&gt; 就可以&lt;/p&gt;&#xA;&lt;p&gt;需要注意的是运行的目录需要在 shardingsphere-proxy 的根目录下，因此命令如下所示&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;sh bin/start.sh 5555 --agent&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;查看日志 &lt;code&gt;vim logs/stdout.log&lt;/code&gt; 打印的应该如下所示&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Mar 31, 2025 6:07:37 PM org.apache.shardingsphere.agent.core.plugin.jar.PluginJarLoader load&#xA;INFO: Loaded jar: shardingsphere-agent-metrics-prometheus-5.5.2.jar&#xA;Mar 31, 2025 6:07:37 PM org.apache.shardingsphere.agent.core.plugin.jar.PluginJarLoader load&#xA;INFO: Loaded jar: shardingsphere-agent-tracing-opentelemetry-5.5.2.jar&#xA;Mar 31, 2025 6:07:37 PM org.apache.shardingsphere.agent.core.plugin.jar.PluginJarLoader load&#xA;INFO: Loaded jar: shardingsphere-agent-metrics-core-5.5.2.jar&#xA;Mar 31, 2025 6:07:37 PM org.apache.shardingsphere.agent.core.plugin.jar.PluginJarLoader load&#xA;INFO: Loaded jar: shardingsphere-agent-plugin-core-5.5.2.jar&#xA;Mar 31, 2025 6:07:37 PM org.apache.shardingsphere.agent.core.plugin.jar.PluginJarLoader load&#xA;INFO: Loaded jar: shardingsphere-agent-logging-file-5.5.2.jar&#xA;[INFO ] 2025-03-31 18:07:38.772 [main] o.a.s.d.p.c.l.PipelineContextManagerLifecycleListener - mode type is not Cluster, mode type=&amp;#39;Standalone&amp;#39;, ignore&#xA;[INFO ] 2025-03-31 18:07:38.786 [main] o.a.s.p.v.ShardingSphereProxyVersion - Database type is `MySQL`, version is `8.0.41`, database name is `sharding_db`&#xA;[INFO ] 2025-03-31 18:07:38.786 [main] o.a.s.p.frontend.ssl.ProxySSLContext - Proxy frontend SSL/TLS is not enabled.&#xA;[INFO ] 2025-03-31 18:07:38.836 [main] o.a.s.p.frontend.ShardingSphereProxy - ShardingSphere-Proxy Standalone mode started successfully&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;这个时候需要查询一下数据库，agent才会把服务启起来&lt;/p&gt;</description>
    </item>
    <item>
      <title></title>
      <link>/post/blog/2025/2025-10-09-nginx-%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/post/blog/2025/2025-10-09-nginx-%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/</guid>
      <description>&lt;h1 id=&#34;不知道-nginx-的配置文件在哪里&#34;&gt;不知道 nginx 的配置文件在哪里&lt;a class=&#34;anchor&#34; href=&#34;#%e4%b8%8d%e7%9f%a5%e9%81%93-nginx-%e7%9a%84%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e5%9c%a8%e5%93%aa%e9%87%8c&#34;&gt;#&lt;/a&gt;&lt;/h1&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;find / -name &amp;#34;*nginx*&amp;#34;&lt;/code&gt;&lt;/pre&gt;&lt;h1 id=&#34;基本操作&#34;&gt;基本操作&lt;a class=&#34;anchor&#34; href=&#34;#%e5%9f%ba%e6%9c%ac%e6%93%8d%e4%bd%9c&#34;&gt;#&lt;/a&gt;&lt;/h1&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;启动 &lt;code&gt;./nginx&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;停止运行 &lt;code&gt;./nginx -s stop&lt;/code&gt;&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
  </channel>
</rss>
